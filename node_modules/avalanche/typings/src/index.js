"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Buffer = exports.BN = exports.AvalancheCore = exports.DB = exports.BinTools = exports.Avalanche = void 0;
/**
 * @packageDocumentation
 * @module Avalanche
 */
const avalanche_1 = __importDefault(require("./avalanche"));
exports.AvalancheCore = avalanche_1.default;
const api_1 = require("./apis/admin/api");
const api_2 = require("./apis/auth/api");
const api_3 = require("./apis/avm/api");
const api_4 = require("./apis/health/api");
const api_5 = require("./apis/info/api");
const api_6 = require("./apis/keystore/api");
const api_7 = require("./apis/metrics/api");
const api_8 = require("./apis/platformvm/api");
const constants_1 = require("./utils/constants");
const helperfunctions_1 = require("./utils/helperfunctions");
const bintools_1 = __importDefault(require("./utils/bintools"));
exports.BinTools = bintools_1.default;
const db_1 = __importDefault(require("./utils/db"));
exports.DB = db_1.default;
const bn_js_1 = __importDefault(require("bn.js"));
exports.BN = bn_js_1.default;
const buffer_1 = require("buffer/");
Object.defineProperty(exports, "Buffer", { enumerable: true, get: function () { return buffer_1.Buffer; } });
/**
 * AvalancheJS is middleware for interacting with Avalanche node RPC APIs.
 *
 * Example usage:
 * ```js
 * let avalanche = new Avalanche("127.0.0.1", 9650, "https");
 * ```
 *
 */
class Avalanche extends avalanche_1.default {
    /**
       * Creates a new Avalanche instance. Sets the address and port of the main Avalanche Client.
       *
       * @param ip The hostname to resolve to reach the Avalanche Client RPC APIs
       * @param port The port to resolve to reach the Avalanche Client RPC APIs
       * @param protocol The protocol string to use before a "://" in a request,
       * ex: "http", "https", "git", "ws", etc ...
       * @param networkid Sets the NetworkID of the class. Default [[DefaultNetworkID]]
       * @param avmChainID Sets the blockchainID for the AVM. Will try to auto-detect,
       * otherwise default "4R5p2RXDGLqaifZE4hHWH9owe34pfoBULn1DrQTWivjg8o4aH"
       * @param skipinit Skips creating the APIs
       */
    constructor(ip, port, protocol = 'http', networkID = constants_1.DefaultNetworkID, XChainID = undefined, hrp = undefined, skipinit = false) {
        super(ip, port, protocol);
        /**
           * Returns a reference to the Admin RPC.
           */
        this.Admin = () => this.apis.admin;
        /**
           * Returns a reference to the Auth RPC.
           */
        this.Auth = () => this.apis.auth;
        /**
           * Returns a reference to the AVM RPC pointed at the X-Chain.
           */
        this.XChain = () => this.apis.xchain;
        /**
           * Returns a reference to the Health RPC for a node.
           */
        this.Health = () => this.apis.health;
        /**
           * Returns a reference to the Info RPC for a node.
           */
        this.Info = () => this.apis.info;
        /**
           * Returns a reference to the Metrics RPC.
           */
        this.Metrics = () => this.apis.metrics;
        /**
           * Returns a reference to the Keystore RPC for a node. We label it "NodeKeys" to reduce
           * confusion about what it's accessing.
           */
        this.NodeKeys = () => this.apis.keystore;
        /**
           * Returns a reference to the PlatformVM RPC pointed at the P-Chain.
           */
        this.PChain = () => this.apis.pchain;
        let chainid = XChainID;
        if (typeof XChainID === 'undefined'
            || !XChainID
            || XChainID.toLowerCase() === 'x') {
            if (networkID.toString() in constants_1.Defaults.network) {
                chainid = constants_1.Defaults.network[networkID].X.blockchainID;
            }
            else {
                chainid = constants_1.Defaults.network[12345].X.blockchainID;
            }
        }
        if (typeof networkID === 'number' && networkID >= 0) {
            this.networkID = networkID;
        }
        else if (typeof networkID === "undefined") {
            networkID = constants_1.DefaultNetworkID;
        }
        if (typeof hrp !== "undefined") {
            this.hrp = hrp;
        }
        else {
            this.hrp = helperfunctions_1.getPreferredHRP(this.networkID);
        }
        if (!skipinit) {
            this.addAPI('admin', api_1.AdminAPI);
            this.addAPI('auth', api_2.AuthAPI);
            this.addAPI('xchain', api_3.AVMAPI, '/ext/bc/X', chainid);
            this.addAPI('health', api_4.HealthAPI);
            this.addAPI('info', api_5.InfoAPI);
            this.addAPI('keystore', api_6.KeystoreAPI);
            this.addAPI('metrics', api_7.MetricsAPI);
            this.addAPI('pchain', api_8.PlatformVMAPI);
        }
    }
}
exports.default = Avalanche;
exports.Avalanche = Avalanche;
exports.utils = __importStar(require("./utils"));
exports.common = __importStar(require("./common"));
exports.admin = __importStar(require("./apis/admin"));
exports.auth = __importStar(require("./apis/auth"));
exports.avm = __importStar(require("./apis/avm"));
exports.health = __importStar(require("./apis/health"));
exports.info = __importStar(require("./apis/info"));
exports.keystore = __importStar(require("./apis/keystore"));
exports.metrics = __importStar(require("./apis/metrics"));
exports.platformvm = __importStar(require("./apis/platformvm"));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7R0FHRztBQUNILDREQUF3QztBQTZIL0Isd0JBN0hGLG1CQUFhLENBNkhFO0FBNUh0QiwwQ0FBNEM7QUFDNUMseUNBQTBDO0FBQzFDLHdDQUF3QztBQUN4QywyQ0FBOEM7QUFDOUMseUNBQTBDO0FBQzFDLDZDQUFrRDtBQUNsRCw0Q0FBZ0Q7QUFDaEQsK0NBQXNEO0FBQ3RELGlEQUErRDtBQUMvRCw2REFBMEQ7QUFDMUQsZ0VBQXdDO0FBZ0gvQixtQkFoSEYsa0JBQVEsQ0FnSEU7QUEvR2pCLG9EQUE0QjtBQWdIbkIsYUFoSEYsWUFBRSxDQWdIRTtBQS9HWCxrREFBdUI7QUFpSGQsYUFqSEYsZUFBRSxDQWlIRTtBQWhIWCxvQ0FBaUM7QUFpSHhCLHVGQWpIQSxlQUFNLE9BaUhBO0FBL0dmOzs7Ozs7OztHQVFHO0FBQ0gsTUFBcUIsU0FBVSxTQUFRLG1CQUFhO0lBMENsRDs7Ozs7Ozs7Ozs7U0FXSztJQUNMLFlBQVksRUFBUyxFQUNuQixJQUFXLEVBQ1gsV0FBa0IsTUFBTSxFQUN4QixZQUFtQiw0QkFBZ0IsRUFDbkMsV0FBa0IsU0FBUyxFQUMzQixNQUFhLFNBQVMsRUFDdEIsV0FBbUIsS0FBSztRQUN4QixLQUFLLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztRQTVENUI7O2FBRUs7UUFDTCxVQUFLLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFpQixDQUFDO1FBRTFDOzthQUVLO1FBQ0wsU0FBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBZSxDQUFDO1FBRXZDOzthQUVLO1FBQ0wsV0FBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBZ0IsQ0FBQztRQUUxQzs7YUFFSztRQUNMLFdBQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQW1CLENBQUM7UUFFN0M7O2FBRUs7UUFDTCxTQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFlLENBQUM7UUFFdkM7O2FBRUs7UUFDTCxZQUFPLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFxQixDQUFDO1FBRWhEOzs7YUFHSztRQUNMLGFBQVEsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQXVCLENBQUM7UUFFbkQ7O2FBRUs7UUFDTCxXQUFNLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUF1QixDQUFDO1FBc0IvQyxJQUFJLE9BQU8sR0FBRyxRQUFRLENBQUM7UUFFdkIsSUFBSSxPQUFPLFFBQVEsS0FBSyxXQUFXO2VBQ2hDLENBQUMsUUFBUTtlQUNULFFBQVEsQ0FBQyxXQUFXLEVBQUUsS0FBSyxHQUFHLEVBQUU7WUFDakMsSUFBSSxTQUFTLENBQUMsUUFBUSxFQUFFLElBQUksb0JBQVEsQ0FBQyxPQUFPLEVBQUU7Z0JBQzVDLE9BQU8sR0FBRyxvQkFBUSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO2FBQ3REO2lCQUFNO2dCQUNMLE9BQU8sR0FBRyxvQkFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO2FBQ2xEO1NBQ0Y7UUFDRCxJQUFJLE9BQU8sU0FBUyxLQUFLLFFBQVEsSUFBSSxTQUFTLElBQUksQ0FBQyxFQUFFO1lBQ25ELElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1NBQzVCO2FBQU0sSUFBRyxPQUFPLFNBQVMsS0FBSyxXQUFXLEVBQUM7WUFDekMsU0FBUyxHQUFHLDRCQUFnQixDQUFDO1NBQzlCO1FBQ0QsSUFBRyxPQUFPLEdBQUcsS0FBSyxXQUFXLEVBQUM7WUFDNUIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7U0FDaEI7YUFBTTtZQUNMLElBQUksQ0FBQyxHQUFHLEdBQUcsaUNBQWUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7U0FDNUM7UUFFRCxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsY0FBUSxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsYUFBTyxDQUFDLENBQUM7WUFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsWUFBTSxFQUFFLFdBQVcsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUNwRCxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxlQUFTLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxhQUFPLENBQUMsQ0FBQztZQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxpQkFBVyxDQUFDLENBQUM7WUFDckMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsZ0JBQVUsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLG1CQUFhLENBQUMsQ0FBQztTQUN0QztJQUNILENBQUM7Q0FDRjtBQS9GRCw0QkErRkM7QUFFUSw4QkFBUztBQU9sQixpREFBaUM7QUFDakMsbURBQW1DO0FBQ25DLHNEQUFzQztBQUN0QyxvREFBb0M7QUFDcEMsa0RBQWtDO0FBQ2xDLHdEQUF3QztBQUN4QyxvREFBb0M7QUFDcEMsNERBQTRDO0FBQzVDLDBEQUEwQztBQUMxQyxnRUFBZ0QiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBBdmFsYW5jaGVcbiAqL1xuaW1wb3J0IEF2YWxhbmNoZUNvcmUgZnJvbSAnLi9hdmFsYW5jaGUnO1xuaW1wb3J0IHsgQWRtaW5BUEkgfSBmcm9tICcuL2FwaXMvYWRtaW4vYXBpJztcbmltcG9ydCB7IEF1dGhBUEkgfSBmcm9tICcuL2FwaXMvYXV0aC9hcGknO1xuaW1wb3J0IHsgQVZNQVBJIH0gZnJvbSAnLi9hcGlzL2F2bS9hcGknO1xuaW1wb3J0IHsgSGVhbHRoQVBJIH0gZnJvbSAnLi9hcGlzL2hlYWx0aC9hcGknO1xuaW1wb3J0IHsgSW5mb0FQSSB9IGZyb20gJy4vYXBpcy9pbmZvL2FwaSc7XG5pbXBvcnQgeyBLZXlzdG9yZUFQSSB9IGZyb20gJy4vYXBpcy9rZXlzdG9yZS9hcGknO1xuaW1wb3J0IHsgTWV0cmljc0FQSSB9IGZyb20gJy4vYXBpcy9tZXRyaWNzL2FwaSc7XG5pbXBvcnQgeyBQbGF0Zm9ybVZNQVBJIH0gZnJvbSAnLi9hcGlzL3BsYXRmb3Jtdm0vYXBpJztcbmltcG9ydCB7IERlZmF1bHROZXR3b3JrSUQsIERlZmF1bHRzIH0gZnJvbSAnLi91dGlscy9jb25zdGFudHMnO1xuaW1wb3J0IHsgZ2V0UHJlZmVycmVkSFJQIH0gZnJvbSAnLi91dGlscy9oZWxwZXJmdW5jdGlvbnMnO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4vdXRpbHMvYmludG9vbHMnO1xuaW1wb3J0IERCIGZyb20gJy4vdXRpbHMvZGInO1xuaW1wb3J0IEJOIGZyb20gXCJibi5qc1wiO1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLyc7XG5cbi8qKlxuICogQXZhbGFuY2hlSlMgaXMgbWlkZGxld2FyZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBBdmFsYW5jaGUgbm9kZSBSUEMgQVBJcy5cbiAqXG4gKiBFeGFtcGxlIHVzYWdlOlxuICogYGBganNcbiAqIGxldCBhdmFsYW5jaGUgPSBuZXcgQXZhbGFuY2hlKFwiMTI3LjAuMC4xXCIsIDk2NTAsIFwiaHR0cHNcIik7XG4gKiBgYGBcbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF2YWxhbmNoZSBleHRlbmRzIEF2YWxhbmNoZUNvcmUge1xuICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBBZG1pbiBSUEMuXG4gICAgICovXG4gIEFkbWluID0gKCkgPT4gdGhpcy5hcGlzLmFkbWluIGFzIEFkbWluQVBJO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIEF1dGggUlBDLlxuICAgICAqL1xuICBBdXRoID0gKCkgPT4gdGhpcy5hcGlzLmF1dGggYXMgQXV0aEFQSTtcblxuICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBBVk0gUlBDIHBvaW50ZWQgYXQgdGhlIFgtQ2hhaW4uXG4gICAgICovXG4gIFhDaGFpbiA9ICgpID0+IHRoaXMuYXBpcy54Y2hhaW4gYXMgQVZNQVBJO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIEhlYWx0aCBSUEMgZm9yIGEgbm9kZS5cbiAgICAgKi9cbiAgSGVhbHRoID0gKCkgPT4gdGhpcy5hcGlzLmhlYWx0aCBhcyBIZWFsdGhBUEk7XG5cbiAgLyoqXG4gICAgICogUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgSW5mbyBSUEMgZm9yIGEgbm9kZS5cbiAgICAgKi9cbiAgSW5mbyA9ICgpID0+IHRoaXMuYXBpcy5pbmZvIGFzIEluZm9BUEk7XG5cbiAgLyoqXG4gICAgICogUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgTWV0cmljcyBSUEMuXG4gICAgICovXG4gIE1ldHJpY3MgPSAoKSA9PiB0aGlzLmFwaXMubWV0cmljcyBhcyBNZXRyaWNzQVBJO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIEtleXN0b3JlIFJQQyBmb3IgYSBub2RlLiBXZSBsYWJlbCBpdCBcIk5vZGVLZXlzXCIgdG8gcmVkdWNlXG4gICAgICogY29uZnVzaW9uIGFib3V0IHdoYXQgaXQncyBhY2Nlc3NpbmcuXG4gICAgICovXG4gIE5vZGVLZXlzID0gKCkgPT4gdGhpcy5hcGlzLmtleXN0b3JlIGFzIEtleXN0b3JlQVBJO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFBsYXRmb3JtVk0gUlBDIHBvaW50ZWQgYXQgdGhlIFAtQ2hhaW4uXG4gICAgICovXG4gIFBDaGFpbiA9ICgpID0+IHRoaXMuYXBpcy5wY2hhaW4gYXMgUGxhdGZvcm1WTUFQSTtcblxuICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEF2YWxhbmNoZSBpbnN0YW5jZS4gU2V0cyB0aGUgYWRkcmVzcyBhbmQgcG9ydCBvZiB0aGUgbWFpbiBBdmFsYW5jaGUgQ2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGlwIFRoZSBob3N0bmFtZSB0byByZXNvbHZlIHRvIHJlYWNoIHRoZSBBdmFsYW5jaGUgQ2xpZW50IFJQQyBBUElzXG4gICAgICogQHBhcmFtIHBvcnQgVGhlIHBvcnQgdG8gcmVzb2x2ZSB0byByZWFjaCB0aGUgQXZhbGFuY2hlIENsaWVudCBSUEMgQVBJc1xuICAgICAqIEBwYXJhbSBwcm90b2NvbCBUaGUgcHJvdG9jb2wgc3RyaW5nIHRvIHVzZSBiZWZvcmUgYSBcIjovL1wiIGluIGEgcmVxdWVzdCxcbiAgICAgKiBleDogXCJodHRwXCIsIFwiaHR0cHNcIiwgXCJnaXRcIiwgXCJ3c1wiLCBldGMgLi4uXG4gICAgICogQHBhcmFtIG5ldHdvcmtpZCBTZXRzIHRoZSBOZXR3b3JrSUQgb2YgdGhlIGNsYXNzLiBEZWZhdWx0IFtbRGVmYXVsdE5ldHdvcmtJRF1dXG4gICAgICogQHBhcmFtIGF2bUNoYWluSUQgU2V0cyB0aGUgYmxvY2tjaGFpbklEIGZvciB0aGUgQVZNLiBXaWxsIHRyeSB0byBhdXRvLWRldGVjdCxcbiAgICAgKiBvdGhlcndpc2UgZGVmYXVsdCBcIjRSNXAyUlhER0xxYWlmWkU0aEhXSDlvd2UzNHBmb0JVTG4xRHJRVFdpdmpnOG80YUhcIlxuICAgICAqIEBwYXJhbSBza2lwaW5pdCBTa2lwcyBjcmVhdGluZyB0aGUgQVBJc1xuICAgICAqL1xuICBjb25zdHJ1Y3RvcihpcDpzdHJpbmcsXG4gICAgcG9ydDpudW1iZXIsXG4gICAgcHJvdG9jb2w6c3RyaW5nID0gJ2h0dHAnLFxuICAgIG5ldHdvcmtJRDpudW1iZXIgPSBEZWZhdWx0TmV0d29ya0lELFxuICAgIFhDaGFpbklEOnN0cmluZyA9IHVuZGVmaW5lZCxcbiAgICBocnA6c3RyaW5nID0gdW5kZWZpbmVkLFxuICAgIHNraXBpbml0OmJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHN1cGVyKGlwLCBwb3J0LCBwcm90b2NvbCk7XG4gICAgbGV0IGNoYWluaWQgPSBYQ2hhaW5JRDtcblxuICAgIGlmICh0eXBlb2YgWENoYWluSUQgPT09ICd1bmRlZmluZWQnXG4gICAgfHwgIVhDaGFpbklEXG4gICAgfHwgWENoYWluSUQudG9Mb3dlckNhc2UoKSA9PT0gJ3gnKSB7XG4gICAgICBpZiAobmV0d29ya0lELnRvU3RyaW5nKCkgaW4gRGVmYXVsdHMubmV0d29yaykge1xuICAgICAgICBjaGFpbmlkID0gRGVmYXVsdHMubmV0d29ya1tuZXR3b3JrSURdLlguYmxvY2tjaGFpbklEO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhaW5pZCA9IERlZmF1bHRzLm5ldHdvcmtbMTIzNDVdLlguYmxvY2tjaGFpbklEO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIG5ldHdvcmtJRCA9PT0gJ251bWJlcicgJiYgbmV0d29ya0lEID49IDApIHtcbiAgICAgIHRoaXMubmV0d29ya0lEID0gbmV0d29ya0lEO1xuICAgIH0gZWxzZSBpZih0eXBlb2YgbmV0d29ya0lEID09PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgIG5ldHdvcmtJRCA9IERlZmF1bHROZXR3b3JrSUQ7XG4gICAgfVxuICAgIGlmKHR5cGVvZiBocnAgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgdGhpcy5ocnAgPSBocnA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaHJwID0gZ2V0UHJlZmVycmVkSFJQKHRoaXMubmV0d29ya0lEKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCFza2lwaW5pdCkge1xuICAgICAgdGhpcy5hZGRBUEkoJ2FkbWluJywgQWRtaW5BUEkpO1xuICAgICAgdGhpcy5hZGRBUEkoJ2F1dGgnLCBBdXRoQVBJKTtcbiAgICAgIHRoaXMuYWRkQVBJKCd4Y2hhaW4nLCBBVk1BUEksICcvZXh0L2JjL1gnLCBjaGFpbmlkKTtcbiAgICAgIHRoaXMuYWRkQVBJKCdoZWFsdGgnLCBIZWFsdGhBUEkpO1xuICAgICAgdGhpcy5hZGRBUEkoJ2luZm8nLCBJbmZvQVBJKTtcbiAgICAgIHRoaXMuYWRkQVBJKCdrZXlzdG9yZScsIEtleXN0b3JlQVBJKTtcbiAgICAgIHRoaXMuYWRkQVBJKCdtZXRyaWNzJywgTWV0cmljc0FQSSk7XG4gICAgICB0aGlzLmFkZEFQSSgncGNoYWluJywgUGxhdGZvcm1WTUFQSSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IEF2YWxhbmNoZSB9O1xuZXhwb3J0IHsgQmluVG9vbHMgfTtcbmV4cG9ydCB7IERCIH07XG5leHBvcnQgeyBBdmFsYW5jaGVDb3JlIH07XG5leHBvcnQgeyBCTiB9O1xuZXhwb3J0IHsgQnVmZmVyIH07XG5cbmV4cG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuZXhwb3J0ICogYXMgY29tbW9uIGZyb20gJy4vY29tbW9uJztcbmV4cG9ydCAqIGFzIGFkbWluIGZyb20gJy4vYXBpcy9hZG1pbic7XG5leHBvcnQgKiBhcyBhdXRoIGZyb20gJy4vYXBpcy9hdXRoJztcbmV4cG9ydCAqIGFzIGF2bSBmcm9tICcuL2FwaXMvYXZtJztcbmV4cG9ydCAqIGFzIGhlYWx0aCBmcm9tICcuL2FwaXMvaGVhbHRoJztcbmV4cG9ydCAqIGFzIGluZm8gZnJvbSAnLi9hcGlzL2luZm8nO1xuZXhwb3J0ICogYXMga2V5c3RvcmUgZnJvbSAnLi9hcGlzL2tleXN0b3JlJztcbmV4cG9ydCAqIGFzIG1ldHJpY3MgZnJvbSAnLi9hcGlzL21ldHJpY3MnO1xuZXhwb3J0ICogYXMgcGxhdGZvcm12bSBmcm9tICcuL2FwaXMvcGxhdGZvcm12bSc7XG5cbiJdfQ==